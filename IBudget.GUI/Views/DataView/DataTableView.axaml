<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="IBudget.GUI.Views.DataView.DataTableView"
			 xmlns:vm="using:IBudget.GUI.ViewModels.DataView"
			 x:DataType="vm:DataTableViewModel"
			 x:CompileBindings="True">

	<UserControl.Styles>
		<!-- Header Card Style -->
		<Style Selector="Border.header-card">
			<Setter Property="Background" Value="{DynamicResource CardBackgroundFillColorDefaultBrush}"/>
			<Setter Property="CornerRadius" Value="12"/>
			<Setter Property="Padding" Value="24,16"/>
			<Setter Property="BorderBrush" Value="{DynamicResource CardStrokeColorDefaultBrush}"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="BoxShadow" Value="0 2 8 0 #0D000000"/>
			<Setter Property="Margin" Value="0,0,0,16"/>
		</Style>

		<!-- Table Container Style -->
		<Style Selector="Border.table-container">
			<Setter Property="Background" Value="{DynamicResource CardBackgroundFillColorDefaultBrush}"/>
			<Setter Property="CornerRadius" Value="12"/>
			<Setter Property="Padding" Value="0"/>
			<Setter Property="BorderBrush" Value="{DynamicResource CardStrokeColorDefaultBrush}"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="BoxShadow" Value="0 2 8 0 #0D000000"/>
		</Style>

		<!-- Toggle Button Style -->
		<Style Selector="Button.toggle-button">
			<Setter Property="Padding" Value="16,8"/>
			<Setter Property="CornerRadius" Value="8"/>
			<Setter Property="FontWeight" Value="Medium"/>
			<Setter Property="MinWidth" Value="150"/>
			<Setter Property="Background" Value="{DynamicResource AccentButtonBackground}"/>
			<Setter Property="Foreground" Value="{DynamicResource AccentButtonForeground}"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Transitions">
				<Transitions>
					<BrushTransition Property="Background" Duration="0:0:0.2"/>
				</Transitions>
			</Setter>
		</Style>

		<Style Selector="Button.toggle-button:pointerover">
			<Setter Property="Background" Value="{DynamicResource AccentButtonBackgroundPointerOver}"/>
		</Style>

		<Style Selector="Button.toggle-button:pressed">
			<Setter Property="Background" Value="{DynamicResource AccentButtonBackgroundPressed}"/>
		</Style>

		<!-- Table Header Style -->
		<Style Selector="Border.table-header">
			<Setter Property="Background" Value="{DynamicResource LayerFillColorDefaultBrush}"/>
			<Setter Property="BorderBrush" Value="{DynamicResource DividerStrokeColorDefaultBrush}"/>
			<Setter Property="BorderThickness" Value="0,0,0,1"/>
			<Setter Property="Padding" Value="16,12"/>
		</Style>

		<!-- Table Cell Style -->
		<Style Selector="Border.table-cell">
			<Setter Property="BorderBrush" Value="{DynamicResource DividerStrokeColorDefaultBrush}"/>
			<Setter Property="BorderThickness" Value="0,0,1,1"/>
			<Setter Property="Padding" Value="16,12"/>
			<Setter Property="Background" Value="Transparent"/>
		</Style>

		<!-- Table Row Style -->
		<Style Selector="Border.table-row">
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="Transitions">
				<Transitions>
					<BrushTransition Property="Background" Duration="0:0:0.1"/>
				</Transitions>
			</Setter>
		</Style>

		<Style Selector="Border.table-row:pointerover">
			<Setter Property="Background" Value="{DynamicResource SubtleFillColorSecondaryBrush}"/>
		</Style>

		<!-- Section Title Style -->
		<Style Selector="TextBlock.section-title">
			<Setter Property="FontSize" Value="20"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}"/>
			<Setter Property="Margin" Value="0,0,0,8"/>
		</Style>

		<!-- Subtitle Style -->
		<Style Selector="TextBlock.subtitle">
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="Foreground" Value="{DynamicResource TextFillColorSecondaryBrush}"/>
		</Style>

		<!-- Header Text Style -->
		<Style Selector="TextBlock.header-text">
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}"/>
		</Style>

		<!-- Cell Text Style -->
		<Style Selector="TextBlock.cell-text">
			<Setter Property="FontSize" Value="13"/>
			<Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
		</Style>

		<!-- Amount Text Style -->
		<Style Selector="TextBlock.amount-text">
			<Setter Property="FontSize" Value="13"/>
			<Setter Property="FontWeight" Value="SemiBold"/>
			<Setter Property="Foreground" Value="{DynamicResource TextFillColorPrimaryBrush}"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
			<Setter Property="HorizontalAlignment" Value="Right"/>
		</Style>

		<!-- ComboBox Style -->
		<Style Selector="ComboBox.period-selector">
			<Setter Property="FontSize" Value="14"/>
			<Setter Property="FontWeight" Value="Medium"/>
			<Setter Property="Padding" Value="12,8"/>
			<Setter Property="CornerRadius" Value="8"/>
			<Setter Property="MinWidth" Value="200"/>
		</Style>
	</UserControl.Styles>

	<Grid RowDefinitions="Auto,Auto,*" Margin="24">

		<!-- Header Section -->
		<Border Classes="header-card" Grid.Row="0">
			<Grid ColumnDefinitions="Auto,*,Auto">
				<StackPanel Grid.Column="0" Spacing="4">
					<TextBlock Classes="section-title">
						<TextBlock.Text>
							<MultiBinding StringFormat="{}{0} Data Table">
								<Binding Path="IsViewingExpenses" Converter="{x:Static vm:DataTableViewModel.ExpenseIncomeConverter}" />
							</MultiBinding>
						</TextBlock.Text>
					</TextBlock>
					<TextBlock Classes="subtitle">
						<TextBlock.Text>
							<MultiBinding StringFormat="View your {0} data in {1} format">
								<Binding Path="IsViewingExpenses" Converter="{x:Static vm:DataTableViewModel.ExpenseIncomeLowerConverter}" />
								<Binding Path="IsViewingMonth" Converter="{x:Static vm:DataTableViewModel.MonthWeekLowerConverter}" />
							</MultiBinding>
						</TextBlock.Text>
					</TextBlock>
				</StackPanel>

				<!-- Period Selector -->
				<ComboBox Grid.Column="2"
                         Classes="period-selector"
                         SelectedIndex="{Binding SelectedMonthIndex}"
                         IsVisible="{Binding IsViewingMonth}"
                         HorizontalAlignment="Right">
					<ComboBoxItem Content="January"/>
					<ComboBoxItem Content="February"/>
					<ComboBoxItem Content="March"/>
					<ComboBoxItem Content="April"/>
					<ComboBoxItem Content="May"/>
					<ComboBoxItem Content="June"/>
					<ComboBoxItem Content="July"/>
					<ComboBoxItem Content="August"/>
					<ComboBoxItem Content="September"/>
					<ComboBoxItem Content="October"/>
					<ComboBoxItem Content="November"/>
					<ComboBoxItem Content="December"/>
				</ComboBox>

				<ComboBox Grid.Column="2"
                         Classes="period-selector"
                         SelectedIndex="{Binding SelectedWeekIndex}"
                         ItemsSource="{Binding WeekOptions}"
                         IsVisible="{Binding !IsViewingMonth}"
                         HorizontalAlignment="Right" />
			</Grid>
		</Border>

		<!-- Toggle Buttons Section -->
		<StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="16" Margin="0,0,0,16">
			<Button Classes="toggle-button"
                    Command="{Binding ToggleViewPeriodCommand}">
				<TextBlock>
					<TextBlock.Text>
						<MultiBinding StringFormat="Switch to {0}">
							<Binding Path="IsViewingMonth" Converter="{x:Static vm:DataTableViewModel.MonthWeekToggleConverter}" />
						</MultiBinding>
					</TextBlock.Text>
				</TextBlock>
			</Button>

			<Button Classes="toggle-button"
                    Command="{Binding ToggleExpenseIncomeCommand}">
				<TextBlock>
					<TextBlock.Text>
						<MultiBinding StringFormat="Switch to {0}">
							<Binding Path="IsViewingExpenses" Converter="{x:Static vm:DataTableViewModel.ExpenseIncomeToggleConverter}" />
						</MultiBinding>
					</TextBlock.Text>
				</TextBlock>
			</Button>
		</StackPanel>

		<!-- Data Table -->
		<Border Classes="table-container" Grid.Row="2">
			<Grid RowDefinitions="Auto,*">
				<!-- Table Header -->
				<Grid Grid.Row="0" ColumnDefinitions="200,150,120,*">
					<Border Classes="table-header" Grid.Column="0">
						<TextBlock Classes="header-text" Text="Tag" />
					</Border>
					<Border Classes="table-header" Grid.Column="1">
						<TextBlock Classes="header-text" Text="Amount" HorizontalAlignment="Right" />
					</Border>
					<Border Classes="table-header" Grid.Column="2">
						<TextBlock Classes="header-text" Text="Date" />
					</Border>
					<Border Classes="table-header" Grid.Column="3">
						<TextBlock Classes="header-text" Text="Description" />
					</Border>
				</Grid>

				<!-- Table Data -->
				<ScrollViewer Grid.Row="1"
                             HorizontalScrollBarVisibility="Auto"
                             VerticalScrollBarVisibility="Auto">
					<ItemsControl ItemsSource="{Binding TableData}">
						<ItemsControl.ItemTemplate>
							<DataTemplate>
								<Border Classes="table-row">
									<Grid ColumnDefinitions="200,150,120,*">
										<Border Classes="table-cell" Grid.Column="0">
											<TextBlock Classes="cell-text" Text="{Binding Tag}" />
										</Border>
										<Border Classes="table-cell" Grid.Column="1">
											<TextBlock Classes="amount-text" Text="{Binding Amount, StringFormat='${0:F2}'}" />
										</Border>
										<Border Classes="table-cell" Grid.Column="2">
											<TextBlock Classes="cell-text" Text="{Binding Date, StringFormat='{}{0:MM/dd/yyyy}'}" />
										</Border>
										<Border Classes="table-cell" Grid.Column="3">
											<TextBlock Classes="cell-text" Text="{Binding Description}" TextTrimming="CharacterEllipsis" />
										</Border>
									</Grid>
								</Border>
							</DataTemplate>
						</ItemsControl.ItemTemplate>
					</ItemsControl>
				</ScrollViewer>
			</Grid>
		</Border>

	</Grid>
</UserControl>